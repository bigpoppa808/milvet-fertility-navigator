import{j as e}from"./ui-Db5bRdDi.js";import{r as s}from"./router-BKJR1vSY.js";import{u as t,s as a,b as r,F as l}from"./index-Czm5Afhy.js";import{F as i,a as n}from"./HeartIcon-FelTQvRp.js";import{m as c,A as o}from"./animations-VixCDSC1.js";import{F as d}from"./UsersIcon-DrhsMAo2.js";import{F as x}from"./StarIcon-D09TiBTm.js";import{F as m}from"./ClockIcon-31jjkHyt.js";import{F as h}from"./HeartIcon-BWkCojqv.js";import{F as u}from"./CheckCircleIcon-B7Ah90hp.js";import"./vendor-D1VVuCdH.js";import"./supabase-BFTN-V_O.js";import"./query-wqeBDHbW.js";function p({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const g=s.forwardRef(p),j=["All Categories","General Support","TRICARE Questions","VA Benefits","Treatment Experiences","Success Stories","Funding Help","Military Life Balance","Partner Support"],f=["Recent","Popular","Most Liked","Most Replies"];function b(){const[p,b]=s.useState([]),[y,N]=s.useState([]),[v,w]=s.useState(!0),[k,C]=s.useState(""),[S,_]=s.useState("All Categories"),[E,L]=s.useState("Recent"),[M,R]=s.useState(!1),[A,F]=s.useState(null),[T,D]=s.useState(new Set),{user:I}=t();s.useEffect(()=>{B()},[]),s.useEffect(()=>{P()},[p,k,S,E]);const B=async()=>{try{const{data:e,error:s}=await a.from("community_posts").select("*").eq("is_moderated",!1).order("created_at",{ascending:!1});s?console.error("Error fetching posts:",s):b(e||[])}catch(e){console.error("Error:",e)}finally{w(!1)}},P=()=>{let e=p;if("All Categories"!==S&&(e=e.filter(e=>e.category===S)),k.trim()){const s=k.toLowerCase();e=e.filter(e=>e.title&&e.title.toLowerCase().includes(s)||e.content&&e.content.toLowerCase().includes(s)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(s)))}switch(E){case"Popular":e.sort((e,s)=>s.likes_count+s.replies_count-(e.likes_count+e.replies_count));break;case"Most Liked":e.sort((e,s)=>s.likes_count-e.likes_count);break;case"Most Replies":e.sort((e,s)=>s.replies_count-e.replies_count);break;default:e.sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime())}const s=e.filter(e=>e.is_pinned),t=e.filter(e=>!e.is_pinned);N([...s,...t])},H=e=>{const s=new Date,t=new Date(e),a=Math.floor((s.getTime()-t.getTime())/6e4);return a<60?`${a}m ago`:a<1440?`${Math.floor(a/60)}h ago`:`${Math.floor(a/1440)}d ago`},$=e=>{switch(e){case"TRICARE Questions":return"bg-blue-100 text-blue-800";case"VA Benefits":return"bg-green-100 text-green-800";case"Success Stories":return"bg-purple-100 text-purple-800";case"Treatment Experiences":return"bg-yellow-100 text-yellow-800";case"Funding Help":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return v?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading community..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 sm:text-4xl",children:"Military Fertility Community"}),e.jsx("p",{className:"mt-4 text-lg text-gray-600 max-w-3xl mx-auto",children:"Connect with other military families on their fertility journey. Share experiences, ask questions, and find support from those who understand your unique challenges."})]}),e.jsx("div",{className:"mt-8 max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search discussions, topics, or questions...",value:k,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:S,onChange:e=>_(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-white",children:j.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("select",{value:E,onChange:e=>L(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-white",children:f.map(s=>e.jsx("option",{value:s,children:s},s))}),I&&e.jsxs("button",{onClick:()=>R(!0),className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),"New Post"]})]})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[y.length," discussion",1!==y.length?"s":""]}),e.jsx("div",{className:"space-y-4",children:y.map((s,t)=>e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},className:"bg-white rounded-lg shadow border p-6 hover:shadow-md transition-shadow cursor-pointer "+(s.is_pinned?"border-yellow-300 bg-yellow-50":"border-gray-200"),onClick:()=>F(s),children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx(d,{className:"h-5 w-5 text-white"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.is_pinned&&e.jsxs("div",{className:"flex items-center text-yellow-600",children:[e.jsx(x,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Pinned"})]}),s.category&&e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${$(s.category)}`,children:s.category})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s.title||"Untitled Discussion"}),s.content&&e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:s.content.length>200?`${s.content.substring(0,200)}...`:s.content}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[s.tags.slice(0,3).map(s=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600",children:["#",s]},s)),s.tags.length>3&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",s.tags.length-3," more"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),H(s.created_at)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),s.replies_count," replies"]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("button",{onClick:e=>{e.stopPropagation(),(async e=>{I&&(D(s=>{const t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t}),b(s=>s.map(s=>s.id===e?{...s,likes_count:T.has(e)?s.likes_count-1:s.likes_count+1}:s)))})(s.id)},className:"flex items-center space-x-1 px-3 py-1 rounded-full text-sm transition-colors hover:bg-gray-100",children:[T.has(s.id)?e.jsx(n,{className:"h-4 w-4 text-red-500"}):e.jsx(h,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:T.has(s.id)?"text-red-500":"text-gray-500",children:s.likes_count})]})})]})]})})})]})},s.id))}),0===y.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(d,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No discussions found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Be the first to start a conversation in this category!"}),I&&e.jsxs("button",{onClick:()=>R(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),"Start a Discussion"]})]})]})}),e.jsxs("div",{className:"w-80 flex-shrink-0",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Community Guidelines"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(u,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"Be respectful and supportive of all community members"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(u,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"Share experiences to help others in their journey"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(l,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"Avoid sharing personal medical advice"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(l,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"Respect privacy and avoid sharing identifying information"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Popular Topics"}),e.jsx("div",{className:"space-y-2",children:j.slice(1,6).map(s=>e.jsx("button",{onClick:()=>_(s),className:"w-full text-left p-3 rounded-lg border transition-colors "+(S===s?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:bg-gray-50"),children:e.jsx("div",{className:"font-medium text-sm",children:s})},s))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upcoming Expert AMAs"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-purple-900 text-sm",children:"Dr. Sarah Johnson"}),e.jsx("p",{className:"text-sm text-purple-700 mt-1",children:"Reproductive Endocrinologist - February 15th, 2pm EST"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 text-sm",children:"TRICARE Benefits Specialist"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Understanding Your Coverage - February 22nd, 1pm EST"})]})]})]})]})]})}),e.jsx(o,{children:A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.title||"Untitled Discussion"}),e.jsxs("button",{onClick:()=>F(null),className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-gray-500",children:[A.category&&e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$(A.category)}`,children:A.category}),e.jsx("span",{children:H(A.created_at)}),e.jsxs("span",{children:[A.likes_count," likes"]}),e.jsxs("span",{children:[A.replies_count," replies"]})]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-96",children:[A.content&&e.jsx("div",{className:"prose max-w-none",children:A.content.split("\n\n").map((s,t)=>e.jsx("p",{className:"mb-4 text-gray-700 leading-relaxed",children:s},t))}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Replies"}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(g,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"Reply functionality coming soon!"})]})]})]})]})})}),e.jsx(o,{children:M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Start a Discussion"}),e.jsxs("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Discussion Creation Form"}),e.jsx("p",{className:"text-gray-600",children:"This feature will allow you to create new discussion topics and connect with the community. Coming soon!"})]})})]})})})]})}export{b as CommunityBridgePage};
