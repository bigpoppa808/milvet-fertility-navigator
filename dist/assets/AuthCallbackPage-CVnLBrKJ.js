import{j as e}from"./ui-Db5bRdDi.js";import{c as r,r as s}from"./router-BKJR1vSY.js";import{s as a}from"./index-Czm5Afhy.js";import"./vendor-D1VVuCdH.js";import"./supabase-BFTN-V_O.js";import"./query-wqeBDHbW.js";import"./animations-VixCDSC1.js";function o(){const o=r();return s.useEffect(()=>{(async()=>{try{const e=window.location.hash;if(e&&e.length>0){const{data:r,error:s}=await a.auth.exchangeCodeForSession(e);if(s)return console.error("Error exchanging code for session:",s.message),void o("/auth/login?error="+encodeURIComponent(s.message));if(r.session){const{user:e}=r.session,{data:s}=await a.from("profiles").select("id").eq("id",e.id).maybeSingle();return s||await a.from("profiles").insert({id:e.id,full_name:e.user_metadata?.full_name||"",service_branch:e.user_metadata?.service_branch||"",service_status:e.user_metadata?.service_status||""}),void o("/dashboard")}}o("/auth/login?error=No session found")}catch(e){console.error("Auth callback error:",e),o("/auth/login?error=Authentication failed")}})()},[o]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Completing sign in..."})]})})}export{o as AuthCallbackPage};
